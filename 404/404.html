<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background-color: #1a1a1a;
      color: #ffffff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .error-container {
      text-align: center;
    }

    h1 {
      font-size: 3rem;
      margin-bottom: 20px;
    }

    canvas {
      border: 2px solid #ffffff;
    }

    #score {
      font-size: 1.5rem;
      margin-top: 20px;
    }
  </style>
  <title>404 | jaki.uy</title>
  <link rel="shortcut icon" href="perrochoto.png" type="image/x-icon">
</head>
<body>
  <div class="error-container">
    <h1>Oops, página no encontrada :)</h1>
    <p>La página que estás buscando no existe. Aquí tienes un juego de suerte.</p>
    <canvas id="mazeCanvas" width="400" height="400"></canvas>
    <p>Vuelve <a href="/">aquí</a> para regresar a la página principal.</p>
    <div id="score">La suerte te ha dado 0 laberintos pasables.</div>
  </div>
  <audio id="winSound">
    <source src="win.mp3" type="audio/mpeg">
  </audio>
  <script>
    const canvas = document.getElementById('mazeCanvas');
    const ctx = canvas.getContext('2d');
    const cellSize = 20;
    const cols = Math.floor(canvas.width / cellSize);
    const rows = Math.floor(canvas.height / cellSize);
    const player = { x: 0, y: 0 };
    let score = 0;

    function generateMaze() {
      const newMaze = Array.from({ length: cols }, () =>
        Array.from({ length: rows }, () => Math.random() > 0.15) // dificultad 
      );

      newMaze[0][0] = true; // empieza
      newMaze[cols - 1][rows - 1] = true; // termina

      return newMaze;
    }

    let maze = generateMaze();

    function drawMaze() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let i = 0; i < cols; i++) {
        for (let j = 0; j < rows; j++) {
          const x = i * cellSize;
          const y = j * cellSize;
          ctx.strokeStyle = maze[i][j] ? '#ffffff' : '#1a1a1a';
          ctx.fillStyle = maze[i][j] ? '#ffffff' : '#1a1a1a';
          ctx.fillRect(x, y, cellSize, cellSize);
          ctx.strokeRect(x, y, cellSize, cellSize);
        }
      }
      ctx.fillStyle = '#ff0000';
      ctx.fillRect(player.x * cellSize, player.y * cellSize, cellSize, cellSize);
    }

    function movePlayer(direction) {
      const dx = direction === 'left' ? -1 : direction === 'right' ? 1 : 0;
      const dy = direction === 'up' ? -1 : direction === 'down' ? 1 : 0;

      const newX = player.x + dx;
      const newY = player.y + dy;

      if (newX >= 0 && newX < cols && newY >= 0 && newY < rows && maze[newX][newY]) {
        player.x = newX;
        player.y = newY;

        if (player.y === rows - 1) { // mira si está en la última fila ashee
          score++;
          maze = generateMaze();
          player.x = 0;
          player.y = 0;
          playWinSound();
          updateScore();
        }

        animateMovement();
      }
    }

    function animateMovement() {
      drawMaze();
      requestAnimationFrame(animateMovement);
    }

    function updateScore() {
      document.getElementById('score').textContent = `La suerte te ha dado ${score} laberintos pasables.`;
    }

    function playWinSound() {
      const winSound = document.getElementById('winSound');
      winSound.currentTime = 0;
      winSound.play();
    }

    canvas.addEventListener('click', () => {
      if (player.y < rows - 1) {
        movePlayer('down');
      }
    });

    window.addEventListener('keydown', (event) => {
      if (event.key === 'w' || event.key === 'W') {
        movePlayer('up');
      } else if (event.key === 'a' || event.key === 'A') {
        movePlayer('left');
      } else if (event.key === 's' || event.key === 'S') {
        movePlayer('down');
      } else if (event.key === 'd' || event.key === 'D') {
        movePlayer('right');
      }
    });

    drawMaze();
  </script>
  <script>
    console.log(`
    _ _
_(,_/ \\ \\____________
|\`. \\_@_@   \`.     ,'
|\\ \\ .        \`-,'
|| |  \`-.____,-'
|| /  /
|/ |  |                             jakineru
\`..     /   \\
\\\\   /    |
||  |      \\
\\\\ /-.    |
||/  /_   |
jk \\(_____)-'_)
 `);
    </script>
    <div id="cookies">
        <script src="func/cookies1.js"></script>
    </div>
</body>
</html>
